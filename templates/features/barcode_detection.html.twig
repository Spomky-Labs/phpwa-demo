{% extends 'base.html.twig' %}

{% block title %}Barcode detection{% endblock %}

{% block body %}
    <turbo-frame id="content">
        <section class="bg-white dark:bg-gray-900" {{ stimulus_controller('barcode')|stimulus_controller('@pwa/barcode-detection') }}>
            <div class="py-8 px-4 mx-auto max-w-screen-xl sm:py-16 lg:px-6 ">
                <h2 class="mb-4 text-4xl tracking-tight font-extrabold text-gray-900 dark:text-white">
                    Barcode detection
                </h2>
                <p class="mb-3 font-light text-gray-500 dark:text-gray-400 sm:text-xl">
                    The Barcode Detection API is a modern browser API that allows web applications to detect barcodes, including QR codes, directly from images or video streams.
                </p>
                <button
                    {{ stimulus_target('barcode', 'startButton') }}
                    {{ stimulus_action('barcode', 'start', 'click') }}
                    class="btn btn-primary"
                >Start detection
                </button>
                <button
                    {{ stimulus_target('barcode', 'stopButton') }}
                    {{ stimulus_action('barcode', 'stop', 'click') }}
                    class="btn btn-error"
                >Stop
                </button>
                <div {{ stimulus_target('barcode', 'alert') }} hidden>
                    <div class="alert alert-error shadow-lg mb-4">
                        <span>Your browser does not support the Barcode Detection API.</span>
                    </div>
                </div>
                <video {{ stimulus_target('barcode', 'video') }} class="w-full" autoplay hidden></video>
                <canvas {{ stimulus_target('barcode', 'canvas') }} hidden></canvas>
                <img alt="Detection image" hidden {{ stimulus_target('barcode', 'snapshot') }} />
            </div>
        </section>
    </turbo-frame>
{% endblock %}
